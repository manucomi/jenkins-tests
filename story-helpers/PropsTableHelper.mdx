import Table from './TableHelper.mdx';

export const tableHeadings = [
    'Name',
    'Type',
    'Default',
    'Description',
    'Required',
];

export const sortRowsByName = (rows) => {
    return [...rows].sort((row1, row2) => {
        if (row1.name > row2.name) {
            return 1;
        }
        if (row1.name < row2.name) {
            return -1;
        }
        return 0;
    });
};

export const getTableBody = (propsList = [], sortRows = true) => {
    return (sortRows ? sortRowsByName(propsList) : propsList).reduce(
        (rows, { name, type, defaultValue, description }) => {
            const row = [
                `<code>${name}</code>`,
                type,
                `<code>${defaultValue ?? ''}</code>` || '',
                description,
            ];
            row.push(typeof defaultValue === 'undefined' ? '✔️' : '');
            rows.push(row);
            return rows;
        },
        []
    );
};

<!--
This is a utility component for creating tables of props in Storybook MDX
documentation. This component extends TableHelper.mdx to provide a simple
to use compoent specifically for defining tables of props.

@example
import PropsTable from ./PropsTableHelper.mdx;

<PropsTable
    propsList={[
        // If no default value is provided, the prop will be marked as required.
        {
            name: 'someRequiredProp',
            type: 'func',
            description: 'A prop that does something.',
        },
        // When a default value is provided, the prop is optional.
        {
            name: 'someOptionalProp',
            type: 'string',
            description: 'A prop that might do something.',
            defaultValue: 'EMPTY',
        },
    ]}
    // Defaults to true.
    sortProps={false}
/>
-->

<Table
    headings={tableHeadings}
    body={getTableBody(props.propsList, props.sortProps)}
    columnAlignment={[null, null, null, null, 'center']}
/>
