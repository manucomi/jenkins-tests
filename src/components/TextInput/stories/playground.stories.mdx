import { useRef, useEffect, hasFocus } from 'react';
import { Meta, Canvas, Story } from '@storybook/addon-docs';
import TextInput from 'Components/TextInput/TextInput';

<Meta
    title="Components/TextInput"
    component={TextInput}
    argTypes={{
        variant: {
            options: Object.values(TextInput.variants),
            control: { type: 'radio' },
        },
    }}
/>

# Playground

export function Template(args) {
    const {
        ariaLabel,
        textInputClassName,
        labelClassName,
        label,
        name,
        onChange,
        placeholder,
        required,
        variant,
        disabled,
        value,
        'data-qa': qaTestSelector,
    } = args;
    const textFieldRef = useRef(null);
    useEffect(() => {
        if (hasFocus) {
            textFieldRef.current?.focus();
        }
    }, [textFieldRef]);
    return (
        <TextInput
            ariaLabel={ariaLabel}
            textInputClassName={textInputClassName}
            labelClassName={labelClassName}
            variant={variant}
            ref={textFieldRef}
            name={name}
            label={label}
            placeholder={placeholder}
            onChange={onChange}
            disabled={disabled}
            required={required}
            value={value}
            data-qa={qaTestSelector}
        />
    );
}

<Canvas>
    <Story
        name="Playground"
        args={{
            label: 'Label',
            name: 'textInputPlayground',
            variant: TextInput.variants.EMAIl,
        }}
    >
        {Template.bind({})}
    </Story>
</Canvas>
