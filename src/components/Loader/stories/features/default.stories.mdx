import { Meta, Story } from '@storybook/addon-docs';
import Loader, { LoaderTestIds } from 'Components/Loader/Loader';

# Default Loader

The `Loader` component provides a loading animation.
Hence it doesn't have any variation.

<Meta
    title="Components/Loader/Features"
    component={Loader}
    argTypes={{
        className: {
            table: { disable: true },
        },
    }}
/>

export function Template(args) {
    const { className } = args;
    return <Loader className={className} />;
}

export const beforeTests = async (container) => {
    await container.$eval(
        `[data-testid="${LoaderTestIds.CONTAINER}"] > div`,
        (element) => {
            const rotation = element;
            rotation.style.animationIterationCount = '0';
        }
    );
    await container.$eval(
        `[data-testid="${LoaderTestIds.CONTAINER}"] > div > div`,
        (element) => {
            const filler = element;
            filler.style.animationIterationCount = '0';
        }
    );
    await container.$eval(
        `[data-testid="${LoaderTestIds.CONTAINER}"] > div > div > div`,
        (element) => {
            const mask = element;
            mask.style.animationIterationCount = '0';
        }
    );
};

<Story
    name="Default"
    args={{}}
    parameters={{
        custom: {
            beforeA11y: beforeTests,
            beforeScreenshot: beforeTests,
        },
    }}
>
    {Template.bind({})}
</Story>
