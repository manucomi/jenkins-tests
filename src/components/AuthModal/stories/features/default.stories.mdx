import { Meta, Story } from '@storybook/addon-docs';
import { useState } from 'react';
import classNames from 'classnames';
import AuthModal from 'Components/AuthModal/AuthModal';
import styles from '../stories.module.scss';

<Meta
    title="Components/AuthModal/Features"
    component={AuthModal}
    argTypes={{
        onClose: {
            table: { disable: true },
        },
        selectedView: {
            table: { disable: true },
        },
    }}
/>

# Default

`SIGN_IN` is the default view when the modal is open.

export function Template() {
    const [isAuthOpen, setIsAuthOpen] = useState(false);
    const handleClose = () => setIsAuthOpen(false);
    const handleOpen = () => setIsAuthOpen(true);
    const buttonClasses = classNames({
        [styles.btn]: true,
        [styles.text]: true,
    });
    return (
        <div style={{ height: '500px' }}>
            <button
                type="button"
                onClick={handleOpen}
                className={buttonClasses}
            >
                Click to open AuthModal
            </button>
            {isAuthOpen && <AuthModal onClose={handleClose} />}
        </div>
    );
}
const beforeTests = async (container) => {
    await container.$eval('button', (element) => element.click());
};

<Story
    name="Default"
    parameters={{
        custom: {
            beforeA11y: beforeTests,
            beforeScreenshot: beforeTests,
        },
    }}
>
    {Template.bind({})}
</Story>
